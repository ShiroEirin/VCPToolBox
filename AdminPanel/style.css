/* Top Bar Styles */
.top-bar {
    background-color: #2c3e50; /* 深蓝灰色，与h1标题协调 */
    color: #ecf0f1; /* 浅灰色文字 */
    padding: 12px 0;
    box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    width: 100%;
    position: sticky; /* 可以考虑粘性定位 */
    top: 0;
    z-index: 1000; /* 确保在最上层 */
}

.top-bar-content {
    width: 90%; /* 与 .container 宽度一致 */
    max-width: 1200px; /* 与 .container 最大宽度一致 */
    margin: 0 auto;
    display: flex;
    justify-content: space-between; /* Keep space-between for overall structure */
    align-items: center;
}

.server-name {
    font-size: 1.1em;
    font-weight: 600;
    background-color: #5e7c9a; /* 更浅的背景色，例如淡灰色 */
    padding: 6px 12px;
    border-radius: 5px;
    color: #2c3e50; /* 深色文字，与顶部栏背景色形成对比 */
    box-shadow: 0 1px 2px rgba(0,0,0,0.05); /* 更柔和的阴影 */
}

.plugin-stats {
    font-size: 0.95em;
    background-color: #34495e; /* 稍浅一点的背景 */
    padding: 5px 10px;
    border-radius: 4px;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* 更现代的字体 */
    margin: 0; /* 确保顶部栏可以接触到页面边缘，如果 sticky 定位 */
    background-color: #f0f2f5; /* 淡雅的背景色 */
    color: #333;
    line-height: 1.6;
}

.container {
    width: 90%; /* 更宽一些 */
    max-width: 1200px; /* 最大宽度 */
    margin: 30px auto;
    background: #ffffff;
    padding: 25px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* 更柔和的阴影 */
    border-radius: 12px; /* 更大的圆角 */
}

h1 {
    color: #2c3e50; /* 深蓝灰色 */
    text-align: center;
    margin-bottom: 30px;
    font-weight: 600;
}

h2 {
    color: #34495e; /* 次级标题颜色 */
    text-align: left; /* 标题左对齐 */
    margin-bottom: 20px;
    font-weight: 500;
    border-bottom: 1px solid #ecf0f1; /* 更细的分割线 */
    padding-bottom: 10px;
}

.section {
    margin-bottom: 35px;
    padding: 25px;
    background-color: #fff;
    border: 1px solid #e0e0e0; /* 更浅的边框 */
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.04);
}

.section h2 { /* section 内的 h2 特殊处理 */
    margin-top: 0;
    font-size: 1.3em;
}

textarea,
.config-editor input[type="text"] { /* 统一文本输入框样式 */
    width: 100%;
    padding: 12px;
    border: 1px solid #d1d5db; /* 浅灰色边框 */
    border-radius: 6px;
    margin-bottom: 12px;
    font-size: 14px;
    line-height: 1.5;
    box-sizing: border-box; /* 确保 padding 不会撑大宽度 */
    transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

textarea:focus,
.config-editor input[type="text"]:focus {
    border-color: #007bff; /* 蓝色高亮 */
    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
    outline: none;
}


/* 主配置编辑器样式 */
.config-editor {
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    padding: 15px;
    background-color: #f9fafb; /* 轻微的背景色 */
}

.config-item {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    padding: 8px 0;
    border-bottom: 1px dashed #ecf0f1; /* 项目间虚线分隔 */
}
.config-item:last-child {
    border-bottom: none;
}

.config-key {
    flex: 0 0 200px; /* 固定标签宽度 */
    font-weight: 500;
    color: #34495e;
    padding-right: 15px;
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.config-value { /* class for the input field itself */
    flex-grow: 1;
    /* Specific styles for input are now combined with textarea */
}

.config-comment {
    color: #7f8c8d; /* 注释颜色 */
    font-style: italic;
    padding: 5px 0;
    font-size: 13px;
    white-space: pre-wrap; /* 保留换行和空格 */
}


button {
    background-color: #007bff; /* 主题蓝色 */
    color: white;
    padding: 12px 20px; /* 稍大的 padding */
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 15px;
    font-weight: 500;
    transition: background-color 0.2s ease, box-shadow 0.2s ease;
    margin-right: 10px; /* 按钮间距 */
}
button:last-child {
    margin-right: 0;
}

button:hover {
    background-color: #0056b3; /* 深一点的蓝色 */
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

button#restartServer { /* 重启按钮特殊颜色 */
    background-color: #ffc107; /* 警告黄色 */
    color: #212529;
}
button#restartServer:hover {
    background-color: #e0a800;
}


.status {
    margin-top: 15px;
    font-style: normal; /* 不用斜体 */
    color: #6c757d; /* 柔和的灰色 */
    font-size: 14px;
    padding: 8px 12px;
    background-color: #e9ecef;
    border-radius: 4px;
    display: inline-block; /* 让背景适应内容 */
}
.status.error { /* 错误状态 */
    color: #721c24;
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
}


#pluginList .plugin-item {
    border: 1px solid #e0e0e0;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 8px;
    background-color: #fdfdfd; /* 比 section 更浅一点 */
    box-shadow: 0 1px 3px rgba(0,0,0,0.03);
}

#pluginList .plugin-item h3 {
    margin-top: 0;
    margin-bottom: 12px;
    color: #2c3e50;
    font-size: 1.15em;
}

#pluginList .plugin-item p {
    margin-bottom: 8px;
    font-size: 14px;
}

#pluginList .plugin-item textarea {
    min-height: 70px;
    margin-bottom: 10px;
    font-size: 13px;
}

#pluginList .plugin-item .actions button {
    padding: 8px 12px; /* 插件操作按钮小一点 */
    font-size: 13px;
    margin-right: 8px;
}

/* 插件启用/禁用按钮颜色调整 */
#pluginList .plugin-item .actions .toggle-button.enabled {
    background-color: #dc3545; /* 禁用按钮 - 红色 */
}
#pluginList .plugin-item .actions .toggle-button.enabled:hover {
    background-color: #c82333;
}

#pluginList .plugin-item .actions .toggle-button.disabled {
    background-color: #28a745; /* 启用按钮 - 绿色 */
}
#pluginList .plugin-item .actions .toggle-button.disabled:hover {
    background-color: #218838;
}

/* 编辑/保存/取消描述按钮 */
#pluginList .plugin-item .actions .edit-description-button,
#pluginList .plugin-item .actions .save-description-button,
#pluginList .plugin-item .actions .cancel-edit-description-button {
    background-color: #6c757d; /* 中性灰色 */
}
#pluginList .plugin-item .actions .edit-description-button:hover,
#pluginList .plugin-item .actions .save-description-button:hover,
#pluginList .plugin-item .actions .cancel-edit-description-button:hover {
    background-color: #5a6268;
}

/* 插件特定状态消息 */
.plugin-specific-status {
    font-size: 13px;
    margin-top: 8px;
}
/* Invocation Commands Section Styles */
.invocation-commands-section {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid #e0e0e0; /* Separator from plugin config */
}

.invocation-commands-section h4 {
    font-size: 1.1em;
    color: #34495e;
    margin-bottom: 15px;
}

.commands-list .command-item {
    background-color: #f9fafb; /* Slightly different background for each command block */
    padding: 15px;
    border: 1px solid #e7e7e7;
    border-radius: 6px;
    margin-bottom: 15px;
}

.command-item h5 {
    font-size: 1em;
    color: #2c3e50;
    margin-top: 0;
    margin-bottom: 10px;
    font-weight: 600;
}

.command-item label {
    display: block;
    font-weight: 500;
    color: #555;
    margin-bottom: 5px;
    font-size: 0.9em;
}

textarea.command-description-edit {
    width: 100%;
    min-height: 120px; /* Good default height for descriptions */
    padding: 10px;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-size: 14px;
    line-height: 1.6;
    margin-bottom: 10px;
    box-sizing: border-box;
    resize: vertical; /* Allow vertical resizing */
    transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

textarea.command-description-edit:focus {
    border-color: #007bff;
    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
    outline: none;
}

.command-item .save-command-description-button {
    background-color: #17a2b8; /* Info blue/teal for command specific save */
    color: white;
    padding: 8px 12px;
    font-size: 13px;
    margin-top: 5px;
}

.command-item .save-command-description-button:hover {
    background-color: #138496; /* Darker shade for hover */
}
/* Top Bar Title Styles */
.top-bar-title {
    color: #ecf0f1;
    font-size: 1.2em; /* 根据需要调整大小 */
    font-weight: bold;
    margin: 0 10px; /* Add some margin to prevent touching edges if server-name or plugin-stats are short */
    flex-grow: 1; /* Allow title to take available space */
    text-align: center; /* Center the text within the title element */
    min-width: 0; /* Allow shrinking if needed */
}

.server-name, .plugin-stats {
    flex-shrink: 0; /* Prevent server name and plugin stats from shrinking too much */
}

/* Main Config Actions Styles */
.main-config-actions {
    display: flex;
    align-items: center; /* Vertically align items to the center of the line */
    gap: 10px;
    margin-top: 15px;
}

.main-config-actions button,
.main-config-actions .status {
    height: 45px; /* Explicit height */
    padding: 0 15px; /* Horizontal padding only */
    font-size: 14px;
    margin-right: -3px;
    margin-top: -15px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    border-radius: 6px;
    border: 1px solid transparent; /* Base border for box model consistency */
}

.main-config-actions .status {
    margin-top: 0;
    background-color: #e9ecef;
    color: #6c757d;
    border-color: #ced4da; /* Override with visible border */
}

/* Ensure specific button styles don't override height and maintain consistent border for box model */
.main-config-actions button#saveMainConfig {
    background-color: #007bff;
    color: white;
    /* border: 1px solid #007bff; /* Or keep transparent if no visible border desired */
}
.main-config-actions button#restartServer {
     background-color: #ffc107;
     color: #212529;
     /* border: 1px solid #ffc107; /* Or keep transparent */
}

/* Ensure buttons also use box-sizing for consistent height calculation */
/* General button box-sizing is good, but ensure it doesn't conflict with explicit height */
button {
    box-sizing: border-box;
}

/* Plugin save button area - fix for the small square */
/* Assuming the "small square" is the status paragraph next to the save button */
/* We can style the container of the button and status for better alignment */
#pluginList .plugin-item .actions + h4 + textarea + button + p.plugin-specific-status {
    margin-left: 10px; /* Add some space if it's too close */
}

/* If the "小方块" is an unexpected element, we might need to hide it.
   For example, if it's an empty p tag or a mis-styled element.
   Let's first try to improve spacing for the existing status element.
   If the issue is a specific unwanted element, a more targeted CSS rule would be needed.
   Based on the screenshot, it seems like the status message itself.
   Let's ensure plugin buttons and their associated status messages are well-aligned.
*/

#pluginList .plugin-item > button.save-plugin-config-button,
#pluginList .plugin-item > p.plugin-specific-status {
    display: inline-block; /* Align them on the same line */
    vertical-align: middle; /* Vertically align them */
    margin-top: 10px; /* Add some top margin for spacing */
}

#pluginList .plugin-item > p.plugin-specific-status {
    margin-left: 8px; /* Space between button and status */
    padding: 8px 12px; /* Consistent padding */
}

/* Adjusting the plugin actions container for better button alignment */
#pluginList .plugin-item .actions {
    display: flex;
    flex-wrap: wrap; /* Allow buttons to wrap if not enough space */
    align-items: center;
    gap: 8px; /* Spacing between action buttons */
    margin-bottom: 15px; /* Space below action buttons */
}

#pluginList .plugin-item .actions button {
    margin-right: 0; /* Remove individual margins, use gap */
}

/* Specific styling for the container of plugin config save button and its status */
.plugin-config-controls {
    display: flex;
    align-items: center; /* Vertically align items to the center of the line */
    gap: 10px;
    margin-top: 10px;
}

.plugin-config-controls .save-plugin-config-button,
.plugin-config-controls .plugin-specific-status {
    height: 36px; /* Explicit height */
    padding: 0 12px; /* Horizontal padding */
    font-size: 13px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    margin-top: -5px;
    border-radius: 6px;
    border: 1px solid transparent; /* Base border for box model consistency */
}

.plugin-config-controls .save-plugin-config-button {
    background-color: #007bff;
    color: white;
    /* border: 1px solid #007bff; /* Or keep transparent */
}

.plugin-config-controls .plugin-specific-status {
    background-color: #e9ecef;
    color: #6c757d;
    border-color: #ced4da; /* Override with visible border */
    margin-top: 4px;
    margin-right: 50px;
    /* If status is empty, it will still take up height. JS might be needed to hide if truly empty. */
}

/* Remove the overly broad rule that might be conflicting */
/* Commenting out the rule from lines 380-385 if it's causing issues with the new .plugin-config-controls styling */
/*
#pluginList .plugin-item > button.save-plugin-config-button,
#pluginList .plugin-item > p.plugin-specific-status {
    display: inline-block;
    vertical-align: middle;
    margin-top: 10px;
}

#pluginList .plugin-item > p.plugin-specific-status {
    margin-left: 8px;
    padding: 8px 12px;
}
*/